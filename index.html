<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Horas Planet√°rias</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: linear-gradient(to bottom, #1a1a2e, #0f3460);
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 90%;
      width: 600px;
      margin: auto;
      padding: 20px;
      background: rgba(22, 33, 62, 0.9);
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
    }
    h1, h2 {
      color: #f8b400;
      margin-bottom: 10px;
    }
    /* Molduras para os campos */
    .planet-info {
      margin: 20px 0;
      padding: 15px;
      background: rgba(15, 52, 96, 0.8);
      border-radius: 5px;
    }
    .tempo-restante, .adjacent-hours, #info-message {
      color: #f8b400;
      font-size: 0.8em;
      margin-top: 5px;
    }
    .button {
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      background-color: #f8b400;
      color: #1a1a2e;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .button:hover {
      background-color: #ffcc29;
    }
    /* Oculta o status de localiza√ß√£o */
    #location-status {
      display: none;
    }
    /* Cidade e estado em negrito */
    #city-name {
      font-weight: bold;
    }
    @media (max-width: 768px) {
      .container {
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Horas Planet√°rias</h1>
    <p>Confira o dia e a hora planet√°ria atual baseado na sua localiza√ß√£o.</p>
    
    <!-- Moldura para o Dia Planet√°rio -->
    <div class="planet-info" id="dia-planetario-container">
      <h2>Dia Planet√°rio: <span id="dia-planetario">...</span></h2>
      <p class="tempo-restante" id="tempo-passado">O Sol nasceu h√°: --:--:--</p>
      <p class="tempo-restante" id="tempo-ate-p√¥r">O Sol se p√µe em: --:--:--</p>
    </div>
    
    <!-- Moldura para a Hora Planet√°ria -->
    <div class="planet-info" id="hora-planetaria-container">
      <h2>Hora Planet√°ria Atual: <span id="planet-icon">üîÜ</span> <span id="hora-planetaria">...</span></h2>
      <p class="tempo-restante">Tempo Restante: <span id="cronometro">--:--:--</span></p>
      <p class="adjacent-hours">
        Hora Anterior: <span id="hora-anterior">...</span> | Pr√≥xima Hora: <span id="proxima-hora">...</span>
      </p>
    </div>
    
    <!-- Terceira moldura para informa√ß√µes adicionais -->
    <div class="planet-info" id="info-container">
      <h2 id="info-title">...</h2>
      <p id="info-message"></p>
    </div>
    
    <button class="button" onclick="getLocation()">Detectar Localiza√ß√£o</button>
    <p id="location-status">Localiza√ß√£o n√£o detectada.</p>
    <p id="city-name">Cidade n√£o detectada.</p>
    <p id="sunrise-sunset">
      Nascer do Sol: <span id="sunrise-time">--:--</span> | P√¥r do Sol: <span id="sunset-time">--:--</span>
    </p>
  </div>
  
  <script>
    // Configura√ß√£o dos dados para cada dia da semana
    const dayConfigurations = {
      "Domingo": {
        sequence: ["‚òâ Sol", "‚ôÄ V√™nus", "‚òø Merc√∫rio", "‚òΩ Lua", "‚ôÑ Saturno", "‚ôÉ J√∫piter", "‚ôÇ Marte"],
        messages: [
          "Fazendo um discurso",
          "Ganhando o amor de um senhor",
          "Para se dirigir aos senhores",
          "Para um encontro com um senhor",
          "Pode impedir um encontro com um senhor",
          "Pode comparecer perante um senhor",
          "Fazer nada",
          "Para qualquer coisa sobre senhores",
          "Para qualquer coisa sobre amor",
          "Pode escrever uma peti√ß√£o",
          "Pode fazer um discurso",
          "Fazer nada",
          "Pode ajudar os amigos",
          "Para impedir um discurso",
          "Pode enviar sonhos a um rei",
          "Pode enviar sonhos a uma senhora",
          "Fazer nada",
          "Trabalhar",
          "Fazer nada",
          "Magia ou talism√£s para o amor dos senhores",
          "Para amarrar e restringir outros",
          "Pode comparecer perante um rei",
          "Pode aparecer diante de uma senhora",
          "Descanse, n√£o fa√ßa nada"
        ]
      },
      "Segunda-feira": {
        sequence: ["‚òΩ Lua", "‚ôÑ Saturno", "‚ôÉ J√∫piter", "‚ôÇ Marte", "‚òâ Sol", "‚ôÄ V√™nus", "‚òø Merc√∫rio"],
        messages: [
          "Magia ou talism√£s para comprar e vender",
          "para doen√ßa",
          "Abrindo uma oficina",
          "Para restringir uma oficina",
          "Magia ou talism√£s para vender",
          "Para negocia√ß√µes",
          "Para viagens e viagens",
          "Para comprar",
          "Para vincular e restringir",
          "Abrir um neg√≥cio",
          "Para prevenir a sorte",
          "Abrir um neg√≥cio",
          "Descansar",
          "Para ganhar a vida",
          "Trabalhe em seus assuntos",
          "Fazer nada",
          "Escreva e fale em seu pr√≥prio nome",
          "Ligar, restringir, impedir",
          "Iniciar qualquer plano",
          "Descansar",
          "Mova e agite os assuntos",
          "Calcule seu plano",
          "Fazer nada",
          "Abra sua oficina"
        ]
      },
      "Ter√ßa-feira": {
        sequence: ["‚ôÇ Marte", "‚òâ Sol", "‚ôÄ V√™nus", "‚òø Merc√∫rio", "‚òΩ Lua", "‚ôÑ Saturno", "‚ôÉ J√∫piter"],
        messages: [
          "Magia e talism√£s para a vit√≥ria na guerra",
          "Pode pegar saque",
          "Para exibir habilidades militares",
          "Pode ir para a guerra",
          "Para ir e voltar ou batalhas noturnas",
          "Tenha cuidado, evite a guerra",
          "Pode aparecer diante dos inimigos ou dar gra√ßas",
          "Pedir ajuda",
          "Pode conquistar um castelo inteiro e saquear",
          "Pode fazer atos poderosos",
          "Pode dar desculpas",
          "Despojando inimigos mortos",
          "Tome cuidado",
          "Pode desacreditar algu√©m",
          "Pedir ajuda para sua salva√ß√£o",
          "In√∫til",
          "Pode subir em honra",
          "Para escapar ou esconder",
          "Pode vencer um advers√°rio",
          "Pode marchar contra os inimigos",
          "Pode manter escondido",
          "Rezar para Deus",
          "Pode aparecer na guerra",
          "hora invej√°vel"
        ]
      },
      "Quarta-feira": {
        sequence: ["‚òø Hermes/Merc√∫rio", "‚òΩ Selene/Lua", "‚ôÑ Saturno", "‚ôÉ Zeus/J√∫piter", "‚ôÇ Ares/Marte", "‚òâ H√©lios/Sol", "‚ôÄ Afrodite/V√™nus"],
        messages: [
          "Magia ou talism√£s para invisibilidade e educa√ß√£o",
          "Para descansar e animar",
          "hora in√∫til",
          "Para praticar alquimia",
          "Pode revelar coisas secretas",
          "Pode matar algu√©m e pegar seu tesouro",
          "Pode dominar uma mulher",
          "Magia ou talism√£s relativos √† decis√£o de um tribunal",
          "Pode coabitar com uma mulher",
          "Tome cuidado",
          "Comece o que quiser",
          "Fazer nada",
          "Comece elogiando algu√©m",
          "Comece a orar",
          "Magia e talism√£s sobre sonhos",
          "Para lan√ßar feiti√ßos de liga√ß√£o",
          "hora in√∫til",
          "Pode prejudicar algu√©m",
          "√ötil para tudo e fazer retribui√ß√£o",
          "√∫til para tudo",
          "Para mulheres que curam",
          "Para ensinar",
          "Hora do sucesso",
          "hora in√∫til"
        ]
      },
      "Quinta-feira": {
        sequence: ["‚ôÉ Zeus/J√∫piter", "‚ôÇ Ares/Marte", "‚òâ H√©lios/Sol", "‚ôÄ Afrodite/V√™nus", "‚òø Hermes/Merc√∫rio", "‚òΩ Selene/Lua", "‚ôÑ Saturno"],
        messages: [
          "Para curar homens ou animais",
          "hora in√∫til",
          "Pode comparecer perante um rei",
          "Pode aparecer diante de uma senhora",
          "Para aprender ret√≥rica",
          "Para mudar de resid√™ncia",
          "Tome cuidado",
          "Boa e aben√ßoada hora",
          "Pode causar ci√∫mes",
          "Magia e talism√£s para beneficiar o corpo",
          "Para mulheres que curam",
          "Pode emigrar",
          "Para sucesso",
          "hora in√∫til",
          "Hora para todo tipo de cura",
          "Para fazer uma incis√£o cir√∫rgica",
          "Pode curar um rei",
          "Pode curar uma senhora",
          "Pode n√£o ter medo de ladr√µes",
          "hora alegre",
          "hora in√∫til",
          "Fa√ßa o que voc√™ quiser",
          "Pode causar transtorno",
          "Magia ou talism√£s relativos a tribunais ou senhores"
        ]
      },
      "Sexta-feira": {
        sequence: ["‚ôÄ Afrodite/V√™nus", "‚òø Hermes/Merc√∫rio", "‚òΩ Selene/Lua", "‚ôÑ Saturno", "‚ôÉ Zeus/J√∫piter", "‚ôÇ Ares/Marte", "‚òâ H√©lios/Sol"],
        messages: [
          "Pode amor",
          "Para mensagens de matchmaking",
          "Bom para tudo",
          "Pode causar obst√°culos de amor",
          "Para presentes e conversas agrad√°veis",
          "Pode causar ci√∫mes",
          "Boa hora, ben√©fica para o amor",
          "Pode amor",
          "Para mensagens sobre compromissos",
          "Boa hora para tudo",
          "hora in√∫til",
          "Para fazer acordos",
          "Pode causar √≥dio",
          "Para amarrar um casal com um feiti√ßo",
          "Pode amarrar algu√©m com feiti√ßos de amor",
          "Pode enviar sonhos de amor",
          "Boa hora para tudo",
          "Pode enviar sonhos de √≥dio",
          "Magia e talism√£s para qualquer objetivo ben√©fico",
          "Fazer nada",
          "boa hora",
          "Hora do amor",
          "Hora da alquimia",
          "Para amarrar e restringir o amor"
        ]
      },
      "S√°bado": {
        sequence: ["‚ôÑ Saturno", "‚ôÉ J√∫piter", "‚ôÇ Marte", "‚òâ H√©lios/Sol", "‚ôÄ Afrodite/V√™nus", "‚òø Hermes/Merc√∫rio", "‚òΩ Selene/Lua"],
        messages: [
          "Magia ou talism√£s para ferir seu inimigo ou enviar doen√ßas",
          "Pode causar um naufr√°gio ou prejudicar algu√©m",
          "Para configurar encantamentos",
          "Pode fazer os senhores lutarem entre si",
          "Pode causar √≥dio entre um casal",
          "Pode encontrar o tesouro",
          "Pode falar com dem√¥nios",
          "Para realizar a adivinha√ß√£o da bacia",
          "Para realizar a adivinha√ß√£o do cr√¢nio",
          "Pode fazer com que os povos mergulhem no mar",
          "Pode deixar os litigantes furiosos uns com os outros",
          "Pode causar medo e inimizade",
          "Ben√©fico para descobrir segredos",
          "Pode ver pessoas mortas",
          "Para ter vis√µes ‚Äì Para adivinha√ß√£o de √°gua",
          "√ötil para ensinar",
          "hora muito maligna",
          "hora in√∫til",
          "Para ganhar dinheiro em dados",
          "Pode conter todas as coisas boas",
          "Hora sem virtude",
          "Pode causar vis√µes",
          "√ötil para lucro",
          "Hora de aborrecimento e inimizade"
        ]
      }
    };
  
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("location-status").innerText = "Geolocaliza√ß√£o n√£o suportada pelo navegador.";
      }
    }
  
    function showPosition(position) {
      document.getElementById("location-status").innerText = "Localiza√ß√£o detectada.";
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      getSunTimes(lat, lon);
      getCityName(lat, lon);
    }
  
    function getCityName(lat, lon) {
      let url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`;
      fetch(url)
        .then(response => response.json())
        .then(data => {
          let city = data.address.city || data.address.town || data.address.village || "Cidade desconhecida";
          let state = data.address.state || "Estado desconhecido";
          document.getElementById("city-name").innerText = `Cidade: ${city}, ${state}`;
        })
        .catch(error => {
          console.error("Erro ao obter o nome da cidade:", error);
          document.getElementById("city-name").innerText = "Erro ao obter a cidade.";
        });
    }
  
    function showError(error) {
      document.getElementById("location-status").innerText = "Erro ao obter localiza√ß√£o.";
    }
  
    function getSunTimes(lat, lon) {
      let url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=sunrise,sunset&timezone=auto`;
      fetch(url)
        .then(response => response.json())
        .then(data => {
          let sunrise = new Date(data.daily.sunrise[0]);
          let sunset = new Date(data.daily.sunset[0]);
          let nextSunrise = new Date(sunrise.getTime() + 24 * 60 * 60 * 1000);
  
          let sunriseFormatted = sunrise.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
          let sunsetFormatted = sunset.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
          document.getElementById("sunrise-time").innerText = sunriseFormatted;
          document.getElementById("sunset-time").innerText = sunsetFormatted;
  
          calculatePlanetaryHours(sunrise, sunset, nextSunrise);
          startElapsedTimeTimer(sunrise, sunset);
          startTimeUntilSunset(sunset, nextSunrise);
        })
        .catch(error => {
          console.error("Erro ao obter hor√°rios do sol:", error);
          document.getElementById("sunrise-time").innerText = "Erro";
          document.getElementById("sunset-time").innerText = "Erro";
        });
    }
  
    function calculatePlanetaryHours(sunrise, sunset, nextSunrise) {
      let today = new Date();
      let currentTime = today;
      let startDayIndex;
  
      if (currentTime < sunrise) {
        let prevSunrise = new Date(sunrise.getTime() - 24 * 60 * 60 * 1000);
        let prevSunset = new Date(sunset.getTime() - 24 * 60 * 60 * 1000);
        nextSunrise = sunrise;
        sunrise = prevSunrise;
        sunset = prevSunset;
        startDayIndex = (today.getDay() + 6) % 7;
      } else {
        startDayIndex = today.getDay();
      }
  
      document.getElementById("dia-planetario").innerText = firstHourMapping[startDayIndex];
  
      let config = dayConfigurations[dayNames[startDayIndex]];
  
      let planetaryHours = [];
      if (config && config.sequence) {
        for (let i = 0; i < 24; i++) {
          planetaryHours.push(config.sequence[i % config.sequence.length]);
        }
      } else {
        let firstHourPlanet = firstHourMapping[startDayIndex];
        let icon = firstHourPlanet.charAt(0);
        let firstHourIndex = chaldeanOrder.findIndex(el => el.startsWith(icon));
        for (let i = 0; i < 24; i++) {
          planetaryHours.push(chaldeanOrder[(firstHourIndex + i) % 7]);
        }
      }
  
      let dayDuration = (sunset - sunrise) / 12;
      let nightDuration = (nextSunrise - sunset) / 12;
  
      let intervalStart, intervalEnd;
      let currentHourIndex;
  
      if (currentTime >= sunrise && currentTime < sunset) {
        let h = Math.floor((currentTime - sunrise) / dayDuration);
        currentHourIndex = h + 1;
        intervalStart = new Date(sunrise.getTime() + h * dayDuration);
        intervalEnd = new Date(intervalStart.getTime() + dayDuration);
      } else if (currentTime >= sunset && currentTime < nextSunrise) {
        let h = Math.floor((currentTime - sunset) / nightDuration);
        currentHourIndex = 12 + h + 1;
        intervalStart = new Date(sunset.getTime() + h * nightDuration);
        intervalEnd =
